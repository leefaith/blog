---
title:  React入门
date: 2020-06-11 10:05:55
permalink: /pages/fdff76
categories: 
  - 前端
  - React
tags: 
  - 
---
## 一、React入门

## 1.React的基本认识

- Facebook开源的一个js库
  一个用来动态构建用户界面的js库
-  React的特点
    	Declarative(声明式编码)
        	Component-Based(组件化编码)
        	Learn Once, Write Anywhere(支持客户端与服务器渲染)
        	高效
        	单向数据流
- React高效的原因
  	虚拟(virtual)DOM, 不总是直接操作DOM(批量更新, 减少更新的次数) 
    	高效的DOM Diff算法, 最小化页面重绘(减小页面更新的区域)

## 2.React的基本使用

### 相关 js库

1) react.js: React 的核心库 

2) react-dom.js: 提供操作 DOM 的 react 扩展库 

3) babel.min.js: 解析 JSX 语法代码转为纯 JS 语法代码的库

### 在页面中导入 js

```html
<script type="text/javascript" src="../js/react.development.js"></script>
<script type="text/javascript" src="../js/react-dom.development.js"></script>
<script type="text/javascript" src="../js/babel.min.js"></script>
```

### 编码

```js
<script type="text/babel"> //必须声明 babel 
    // 1.创建虚拟 DOM 元素 
    const vDom = <h1>Hello React</h1> // 千万不要加引号 
    // 2.渲染虚拟 DOM 到页面真实 DOM 容器中
	ReactDOM.render(vDom, document.getElementById('test')) 
</script>
```

## 3.JSX的理解和使用

-  理解

  - 全称: JavaScript XML
  - react定义的一种类似于XML的JS扩展语法: XML+JS
  - 作用: 用来创建react虚拟DOM(元素)对象

- 编码相关

  - js中直接可以套标签, 但标签要套js需要放在{}中

  - 在解析显示js数组时, 会自动遍历显示

  - 把数据的数组转换为标签的数组: 

    ```js
    	var liArr = dataArr.map(function(item, index){
    			return <li key={index}>{item}</li>
    		})
    ```

- 注意:

  - 标签必须有结束
  - 标签的class属性必须改为className属性
  - 标签的style属性值必须为: `{{color:'red', width:12}}`

## 4.几个重要概念理解

### 模块与组件

1. 模块:
    	理解: 向外提供特定功能的js程序, 一般就是一个**js文件**
        	为什么: js代码更多更复杂
        	作用: 复用js, 简化js的编写, 提高js运行效率
2. 组件: 
	理解: 用来实现特定功能效果的代码集合(**html/css/js**)
    	为什么: 一个界面的功能太复杂了
    	作用: 复用编码, 简化项目界面编码, 提高运行效率

### 模块化与组件化

1. 模块化:
	当应用的js都以模块来编写的, 这个应用就是一个模块化的应用
2. 组件化:
	当应用是以多组件的方式实现功能, 这上应用就是一个组件化的应用

## 二、react组件化开发

### 1.基本理解和使用

```js
// 1. 定义组件
    /*方式1: 工厂函数组件(简单组件：没有状态组件)*/
    function MyComponent () {
      return <h2>工厂函数组件(简单组件)</h2>
    }
    /*方式2: ES6类组件(复杂组件)*/
    class MyComponent2 extends React.Component {
      render () {
        console.log(this) // MyComponent2的实例对象
        return <h2>ES6类组件(复杂组件)</h2>
      }
    }
// 2. 渲染组件标签
    ReactDOM.render(<MyComponent />, document.getElementById('example1'))
    ReactDOM.render(<MyComponent2 />, document.getElementById('example2'))
```

**注意：**

1) 组件名必须首字母大写 

1) 组件名必须首字母大写 

2) 虚拟 DOM 元素只能有一个根元素 

3) 虚拟 DOM 元素必须有结束标签

 **render()渲染组件标签的基本流程**

1) React 内部会创建组件实例对象 

2) 得到包含的虚拟 DOM 并解析为真实 DOM 

3) 插入到指定的页面元素内部

### 2.组件的3大属性: state

组件被称为"状态机", 页面的显示是根据**组件的state属性的数据**来显示

```js
//1.初始化指定:
constructor() {
  super()
  this.state = {
    stateName1 : stateValue1,
    stateName2 : stateValue2
  }
}

//2.读取显示: 
this.state.stateName

//3.更新状态-->更新界面 : 
this.setState({stateName1 : newValue})
```

::: details
```js
 class Like extends React.Component {
    constructor (props) {
      super(props)
      // 1.初始化状态
      this.state = {
        isLikeMe: true
      }
      // 绑定this为组件对象
      this.change = this.change.bind(this)
    }
      //新增函数this-> undefined ↑ 
    change () {
      // 3.更新状态: this.setState(({ stateProp1 : value1 })
      this.setState({
        isLikeMe: !this.state.isLikeMe
      })
    }
    render () {
        //2.读取状态值  this.state.statePropertyName
      const text = this.state.isLikeMe ? '你喜欢我' : '我喜欢你'
      return <h2 onClick={this.change}>{text}</h2>
    }
  }
  ReactDOM.render(<Like />, document.getElementById('example'))
```
:::


### 3.组件的3大属性: props

**所有组件标签的属性的集合对象**

-  每个组件对象都会有 props(properties 的简写)属性 

-  组件标签的所有属性都保存在 props 中

- 通过标签属性**从组件外向组件内传递变化的数据** 

-  注意: 组件内部不要修改 props 数据


```js
// 1) 内部读取某个属性值 
this.props.propertyName
// 2) 对 props 中的属性值进行类型限制和必要性限制 
Person.propTypes = { 
    name: React.PropTypes.string.isRequired, 
    age: React.PropTypes.number.isRequired 
} 
//3) 扩展属性: 将对象的所有属性通过 props 传递
<Person {...person}/> 
//4) 默认属性值
Person.defaultProps = { name: 'Mary' }
//5) 组件类的构造函数 
constructor (props) { 
    super(props) console.log(props) // 查看所有属性
}
```
:::  details
```jsx
  //1. 定义组件类
  class Person extends React.Component {
    render() {
      console.log(this)
      return (
        <ul>
          <li>姓名: {this.props.name}</li>
          <li>性别: {this.props.sex}</li>
          <li>年龄: {this.props.age}</li>
        </ul>
      )
    }
  }
  // 对标签属性进行限制
  Person.propTypes = {
    name: PropTypes.string.isRequired,
    sex: PropTypes.string,
    age: PropTypes.number
  }
  // 指定属性的默认值
  Person.defaultProps = {
    sex: '男',
    age: 18
  }

  //2. 渲染组件标签
  const person = {
    name: 'Tom',
    sex: '女',
    age: 18
  }
  ReactDOM.render(<Person {...person}/ >,document.getElementById('example1'))
  const person2 = {
    myName: 'JACK',
    age: 17
  }
  ReactDOM.render(<Person name={person2.myName} age={person2.age}/>,
    document.getElementById('example2'))
```
:::



**组件的 props 和 state 属性区别**

1) state: 组件**自身内部**可变化的数据 

*2)* props: 从**组件外部向组件内部传递数据**, 组件内部只读不修改

### 4.组件的3大属性: refs

1. 组件内的标签都可以定义 **ref 属性来标识自己** 

```js
 <input type="text" ref={input => this.msgInput = input}/> 
     回调函数在组件初始化渲染完或卸载时自动调用 
```

2. 在组件中可以通过 this.msgInput 来得到对应的真实 DOM 元素 

3. 作用: 通过 **ref 获取组件内容特定标签对象, 进行读取其相关数据**

:::  details

```js
 //1.定义组件
    class MyComponent extends React.Component {
      constructor(props) {
        super(props) 
        // 将自定义的函数强制绑定为组件对象
        this.handleClick = this.handleClick.bind(this) 
      }
        
      // 自定义的方法中的this默认为null
      handleClick () {
        // alert(this) //this默认是null, 而不是组件对象
        // 得到绑定在当前组件对象上的input的值
        alert(this.msgInput.value)
      }
        
      handleBlur (event) {
        alert(event.target.value)
      }
        
      render () {
        return (
          <div>
            <input type="text" ref={input => this.msgInput = input}/>{' '}
            <button onClick={this.handleClick}>提示输入数据</button>{' '}
            <input type="text" placeholder="失去焦点提示数据" onBlur={this.handleBlur}/>
          </div>
        )
      }
    }
    // 2.渲染组件标签
    ReactDOM.render(<MyComponent />, document.getElementById('example'))
```
:::

