---
title: React16åŸºç¡€ï¼ˆJSèƒ–ï¼‰
date: 2020-06-12 09:47:33
permalink: /pages/838b64
categories: 
  - å‰ç«¯
  - React
tags: 
  - 
---



# React16åŸºç¡€ï¼ˆJSèƒ–ï¼‰

## ä¸€ã€æ¡ˆä¾‹ï¼šå°å§å§

### æ–°å»ºå°å§å§ç»„ä»¶

åœ¨`SRC`çš„ç›®å½•ä¸‹é¢ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶`Xiaojiejie.js`æ–‡ä»¶ï¼Œç„¶åå†™ä¸€ä¸ªåŸºæœ¬çš„HTMLç»“æ„ã€‚ 

```js
import React,{Component} from 'react'

class Xiaojiejie extends Component{
    render(){
        return  (
            <div>
               <div><input /> <button> å¢åŠ å±æ€§ </button></div>
               <ul>
                   <li>å¯çˆ±æ— æ¯”</li>
                   <li>å®‡å®™æ— æ•Œ</li>
               </ul> 
            </div>
        )
    }
}
export default Xiaojiejie 
```

### ç»„ä»¶å¤–å±‚åŒ…è£¹åŸåˆ™ åŠ Fragmentæ ‡ç­¾

 æˆ‘ä»¬å»æ‰æœ€å¤–å±‚çš„`<Div>`ï¼Œå°±å›æŠ¥é”™ï¼Œå› ä¸ºReactè¦æ±‚å¿…é¡»åœ¨ä¸€ä¸ªç»„ä»¶çš„æœ€å¤–å±‚è¿›è¡ŒåŒ…è£¹ã€‚ 

è¦æƒ³ä½¿ç”¨`<Fragment>`ï¼Œéœ€è¦å…ˆè¿›è¡Œå¼•å…¥ã€‚

```javascript
import React,{Component,Fragment } from 'react'
```

ç„¶åæŠŠæœ€å¤–å±‚çš„`<Div>`æ ‡ç­¾ï¼Œæ¢æˆ`<Fragment>`æ ‡ç­¾

```javascript
import React,{Component,Fragment } from 'react'

class Xiaojiejie extends Component{
    render(){
        return  (
            <Fragment>
               <div><input /> <button> å¢åŠ å±æ€§ </button></div>
               <ul>
                   <li>å¯çˆ±æ— æ¯”</li>
                   <li>å®‡å®™æ— æ•Œ</li>
               </ul> 
            </Fragment>
        )
    }
}
export default Xiaojiejie 
```

### å“åº”å¼è®¾è®¡å’Œæ•°æ®ç»‘å®š

`React`ä¸å»ºè®®ä½ ç›´æ¥æ“ä½œ`DOM`å…ƒç´ ,è€Œæ˜¯è¦é€šè¿‡æ•°æ®è¿›è¡Œé©±åŠ¨ï¼Œæ”¹å˜ç•Œé¢ä¸­çš„æ•ˆæœã€‚

Reactä¼šæ ¹æ®æ•°æ®çš„å˜åŒ–ï¼Œè‡ªåŠ¨çš„å¸®åŠ©ä½ å®Œæˆç•Œé¢çš„æ”¹å˜ã€‚æ‰€ä»¥åœ¨å†™Reactä»£ç æ—¶ï¼Œä½ æ— éœ€å…³æ³¨DOMç›¸å…³çš„æ“ä½œï¼Œåªéœ€è¦**å…³æ³¨æ•°æ®**çš„æ“ä½œå°±å¯ä»¥äº†ã€‚

æ•°æ®å®šä¹‰åœ¨`Xiaojiejie`ç»„ä»¶ä¸­çš„æ„é€ å‡½æ•°é‡Œ`constructor`ã€‚

```javascript
//jsçš„æ„é€ å‡½æ•°ï¼Œç”±äºå…¶ä»–ä»»ä½•å‡½æ•°æ‰§è¡Œ
constructor(props){
    super(props) //è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå›ºå®šå†™æ³•
    this.state={
        inputValue:'' , // inputä¸­çš„å€¼
        list:[]    //æœåŠ¡åˆ—è¡¨
    }
}
```

æŠŠ`inputValue`å€¼ç»‘å®šåˆ°`input`æ¡†ä¸­

```html
<input value={this.state.inputValue} /> 
```

åœ¨è¿™é‡Œæˆ‘ä»¬å¹¶æ²¡æœ‰è¿›è¡Œä»»ä½•çš„`DOM`æ“ä½œï¼Œä½†æ˜¯ç•Œé¢å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™äº›éƒ½æ—¶`React`å¸®æˆ‘ä»¬ä½œçš„ï¼Œå®ƒè¿˜ä¼šè‡ªåŠ¨æ„ŸçŸ¥æ•°æ®çš„å˜åŒ–ã€‚

### ç»‘å®šäº‹ä»¶

è¿™æ—¶å€™ä½ åˆ°ç•Œé¢çš„æ–‡æœ¬æ¡†ä¸­å»è¾“å…¥å€¼ï¼Œæ˜¯æ²¡æœ‰ä»»ä½•å˜åŒ–çš„ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¼ºåˆ¶ç»‘å®šäº†`inputValue`çš„å€¼ã€‚å¦‚æœè¦æƒ³æ”¹å˜ï¼Œéœ€è¦ç»‘å®š**å“åº”äº‹ä»¶**ï¼Œæ”¹å˜`inputValue`çš„å€¼ã€‚æ¯”å¦‚ç»‘å®šä¸€ä¸ªæ”¹å˜äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶æ‰§è¡Œ`inputChange()`(å½“ç„¶è¿™ä¸ªæ–¹æ³•è¿˜æ²¡æœ‰)æ–¹æ³•ã€‚

```html
<input value={this.state.inputValue} onChange={this.inputChange} />
```

åœ¨`render()`æ–¹æ³•çš„ä¸‹é¢å»ºç«‹ä¸€ä¸ª`inputChange()`æ–¹æ³•

çœ‹åˆ°è·å¾—äº†è¾“å…¥çš„å€¼ï¼Œæƒ³å½“ç„¶çš„è®¤ä¸ºç›´æ¥æ”¹å˜`inputValue`çš„å€¼å°±å¯ä»¥äº†

```javascript
inputChange(e){
    console.log(e.target.value);   //è·å–è¾“å…¥çš„å€¼
    this.state.inputValue=e.target.value;  //æ”¹å€¼ é”™è¯¯
}
```

1. ä¸€ä¸ªæ˜¯`this`æŒ‡å‘ä¸å¯¹ï¼Œä½ éœ€è¦**é‡æ–°ç”¨`bind`è®¾ç½®ä¸€ä¸‹æŒ‡å‘**(ES6çš„è¯­æ³•)ã€‚
2. å¦ä¸€ä¸ªæ˜¯`React`ä¸­æ”¹å˜å€¼**éœ€è¦ä½¿ç”¨`this.setState`æ–¹æ³•**ã€‚

è§£å†³ï¼š

1.ç›´æ¥å†`JSX`éƒ¨åˆ†ï¼Œ**åˆ©ç”¨`bind`è¿›è¡Œç»‘å®š**å°±å¥½ã€‚

```js
 <input value={this.state.inputValue} onChange={this.inputChange.bind(this)} />
```

2.æˆ‘ä»¬è¿˜éœ€è¦åŠ å…¥`setState`æ–¹æ³•ï¼Œæ”¹å˜å€¼ã€‚

```javascript
inputChange(e){
    // console.log(e.target.value);
    // this.state.inputValue=e.target.value;
    this.setState({
        inputValue:e.target.value
    })
}
```

### åˆ—è¡¨æ•°æ®åŒ–

listæ•°ç»„å¢åŠ ä¸¤ä¸ªæ•°ç»„å…ƒç´ ï¼Œä»£ç å¦‚ä¸‹ï¼š

```javascript
constructor(props){
    super(props) //è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå›ºå®šå†™æ³•
    this.state={
        inputValue:'lisa' , // inputä¸­çš„å€¼
        //----------ä¸»è¦ ä»£ç --------start
        list:['å¯çˆ±åŠªåŠ›','å®‡å®™æ— æ•Œ']   
        //----------ä¸»è¦ ä»£ç --------end
    }
}
```

æœ‰äº†æ•°æ®åï¼Œå¯ä»¥åœ¨`JSX`éƒ¨åˆ†è¿›è¡Œå¾ªç¯è¾“å‡ºï¼Œä»£ç å¦‚ä¸‹ï¼š

```javascript
render(){
    return  (
        <Fragment>
            <div>
                <input value={this.state.inputValue} onChange={this.inputChange.bind(this)} />
                <button> å¢åŠ å±æ€§</button>
            </div>
            <ul>
                {
                    this.state.list.map((item,index)=>{
                        return <li>{item}</li>
                    })
                }
            </ul>  
        </Fragment>
    )
}
```

### å¢åŠ å±æ€§é€‰é¡¹

å¢åŠ æŒ‰é’®ä¸Šå…ˆç»‘å®šä¸€ä¸ªæ–¹æ³•`this.addList`(è¿™ä¸ªæ–¹æ³•ç›®å‰è¿˜æ²¡æœ‰ï¼Œéœ€è¦æˆ‘ä»¬æ¥ä¸‹æ¥å»ºç«‹).

```html
<button onClick={this.addList.bind(this)}> å¢åŠ å±æ€§ </button>
```

æ¥ä¸‹æ¥å°±æ˜¯æŠŠ`this.addList`æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```javascript
//å¢åŠ æœåŠ¡çš„æŒ‰é’®å“åº”æ–¹æ³•
addList(){
    this.setState({
        list:[...this.state.list,this.state.inputValue]
    })

}
```

è¿™é‡Œéœ€è¦è¯´çš„å¸‚`...`è¿™ä¸ªæ˜¯ES6çš„æ–°è¯­æ³•ï¼Œå«åšæ‰©å±•è¿ç®—ç¬¦ã€‚æ„æ€å°±æ˜¯æŠŠlistæ•°ç»„è¿›è¡Œäº†åˆ†è§£ï¼Œå½¢æˆäº†æ–°çš„æ•°ç»„ï¼Œç„¶åå†è¿›è¡Œç»„åˆã€‚è¿™ç§å†™æ³•æ›´ç®€å•å’Œç›´è§‚ï¼Œæ‰€ä»¥æ¨èè¿™ç§å†™æ³•ã€‚

### keyå€¼é”™è¯¯

ç”¨mapå¾ªç¯æ—¶ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸ªä¸åŒçš„å€¼ï¼Œè¿™ä¸ªæ—¶Reactçš„è¦æ±‚ã€‚æˆ‘ä»¬å¯ä»¥æš‚æ—¶ç”¨`index+item`çš„å½¢å¼æ¥å®ç°ã€‚

```javascript
<ul>
    {
        this.state.list.map((item,index)=>{
            return <li key={index+item}>{item}</li>
        })
    }
</ul>  
```

### æ•°ç»„ä¸‹æ ‡ä¼ é€’

å¦‚æœè¦åˆ é™¤ä¸€ä¸ªä¸œè¥¿ï¼Œå°±è¦å¾—åˆ°æ•°ç»„é‡Œçš„ä¸€ä¸ªç¼–å·ï¼Œè¿™é‡ŒæŒ‡ä¸‹æ ‡ã€‚ä¼ é€’ä¸‹æ ‡å°±è¦æœ‰äº‹ä»¶äº§ç”Ÿï¼Œå…ˆæ¥ç»‘å®šä¸€ä¸ªåŒå‡»äº‹ä»¶.ä»£ç å¦‚ä¸‹:

```javascript
<ul>
    {
        this.state.list.map((item,index)=>{
            return (
                <li 
                    key={index+item}
                    onClick={this.deleteItem.bind(this,index)}
                >
                    {item}
                </li>
            )
        })
    }
</ul>  
```

ä¸ºäº†çœ‹ç€æ›´æ¸…æ™°ï¼Œæˆ‘ä»¬åœ¨`return`éƒ¨åˆ†åŠ äº†`()`è¿™è¦å°±å¯ä»¥æ¢è¡Œç¼–å†™`JSX`ä»£ç äº†.åœ¨`onClick`æˆ‘ä»¬ç»‘å®šäº†`deleteItem`æ–¹æ³•.

### ç¼–å†™`deleteItem`æ–¹æ³•

ç»‘å®šåšå¥½äº†,ç°åœ¨éœ€è¦æŠŠ`deleteItem`,åœ¨ä»£ç çš„æœ€ä¸‹æ–¹,åŠ å…¥ä¸‹é¢çš„ä»£ç .æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°`index`.

 å…ˆå£°æ˜ä¸€ä¸ªå±€éƒ¨å˜é‡,ç„¶ååˆ©ç”¨ä¼ é€’è¿‡æ¥çš„ä¸‹æ ‡,åˆ é™¤æ•°ç»„ä¸­çš„å€¼.åˆ é™¤åç”¨`setState`æ›´æ–°æ•°æ®å°±å¯ä»¥äº†. 

```javascript
//åˆ é™¤å•é¡¹æœåŠ¡
deleteItem(index){
     let list = this.state.list
    list.splice(index,1)
    this.setState({
        list:list
    })
}
```

## äºŒã€JSXè¸©å‘

### JSXä»£ç æ³¨é‡Š

```js
<Fragment>
    {/* æ­£ç¡®æ³¨é‡Šçš„å†™æ³• */}
    {
        //æ­£ç¡®æ³¨é‡Šçš„å†™æ³• 
    }
    <div>
        <input value={this.state.inputValue} onChange={this.inputChange.bind(this)} />
        <button onClick={this.addList.bind(this)}> å¢åŠ å±æ€§ </button>
    </div>
</Fragment>
```

### JSX classé™·é˜±

 `class`æ¢æˆ`className`ï¼Œå®ƒæ˜¯é˜²æ­¢å’Œ`js`ä¸­çš„`class`ç±»å å†²çªï¼Œæ‰€ä»¥è¦æ±‚æ¢æ‰ã€‚

ç¬¬ä¸€æ­¥ï¼šå…ˆå†™ä¸€ä¸ªCSSæ ·å¼æ–‡ä»¶ï¼Œåœ¨`src`ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª`style.css`çš„æ ·å¼æ–‡ä»¶ã€‚

```css
.input {border:3px solid #ae7000}
```

ç¬¬äºŒæ­¥ï¼šåœ¨`Xiaojiejie.js`é‡Œå¼•å…¥ï¼Œå…ˆç”¨`import`è¿›è¡Œå¼•å…¥,èƒ½ç”¨importå¼•å…¥ï¼Œéƒ½æ˜¯webpackçš„åŠŸåŠ³ã€‚

```javascript
import './style.css'
```

ç¬¬ä¸‰éƒ¨ï¼šç»™`JSX`åŠ å…¥className

```jsx
<input className="input" value={this.state.inputValue} onChange={this.inputChange.bind(this)} />
```

### JSXçš„htmlè§£æé—®é¢˜

å¦‚æœæƒ³åœ¨æ–‡æœ¬æ¡†é‡Œè¾“å…¥ä¸€ä¸ª`<h1>`æ ‡ç­¾ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“ã€‚é»˜è®¤æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼Œåªä¼šæŠŠ`<h1>`æ ‡ç­¾æ‰“å°åˆ°é¡µé¢ä¸Šï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘æƒ³è¦çš„ã€‚

å¦‚æœå·¥ä½œä¸­æœ‰è¿™ç§éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨`dangerouslySetInnerHTML`å±æ€§è§£å†³ã€‚

```jsx
<ul>
    {
        this.state.list.map((item,index)=>{
            return (
                <li 
                    key={index+item}
                    onClick={this.deleteItem.bind(this,index)}
                    dangerouslySetInnerHTML={{__html:item}}
                >
                </li>
            )
        })
    }
</ul> 
```

ä¸Šé¢çš„ä»£ç å°±å¯ä»¥å®ç°`html`æ ¼å¼çš„è¾“å‡ºã€‚

### JSXçš„`<label>`

JSXä¸­`<label>`çš„å‘ï¼Œä¹Ÿç®—æ˜¯æ¯”è¾ƒå¤§çš„ä¸€ä¸ªå‘ï¼Œlabelæ˜¯`html`ä¸­çš„ä¸€ä¸ªè¾…åŠ©æ ‡ç­¾ï¼Œä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„ä¸€ä¸ªæ ‡ç­¾ã€‚

å…ˆçœ‹ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬åœ¨æ–‡æœ¬æ¡†å‰é¢åŠ å…¥ä¸€ä¸ª`<label>`ã€‚

```jsx
<div>
    <label for="lisa">åŠ å…¥å±æ€§ ï¼š</label>
    <input id="lisa" className="input" value={this.state.inputValue} onChange={this.inputChange.bind(this)} />
    <button onClick={this.addList.bind(this)}> å¢åŠ å±æ€§</button>
</div>
```

è¿™æ—¶å€™ä½ æµè§ˆæ•ˆæœè™½ç„¶å¯ä»¥æ­£å¸¸ï¼Œä½†`console`é‡Œè¿˜æ˜¯æœ‰çº¢è‰²è­¦å‘Šæç¤ºçš„ã€‚å¤§æ¦‚æ„æ€æ˜¯ä¸èƒ½ä½¿ç”¨`for`.

å®ƒå®¹æ˜“å’Œjavascripté‡Œçš„forå¾ªç¯æ··æ·†ï¼Œ**ä¼šæç¤ºä½ ä½¿ç”¨`htmlfor`ã€‚**

```jsx
<div>
    <label htmlFor="jspang">åŠ å…¥å±æ€§ ï¼š</label>
    <input id="lisa" className="input" value={this.state.inputValue} onChange={this.inputChange.bind(this)} />
    <button onClick={this.addList.bind(this)}> å¢åŠ å±æ€§</button>
</div>
```

## ä¸‰ã€ç»„ä»¶çš„æ‹†åˆ†

### æ–°å»ºæœåŠ¡èœå•ç»„ä»¶

åœ¨`src`ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™é‡Œå°±å«åš`XiaojiejieItem.js`ï¼Œç„¶åå…ˆæŠŠæœ€åŸºç¡€çš„ç»“æ„å†™å¥½

```javascript
import React, { Component } from 'react'; //imrc
class XiaojiejieItem  extends Component { //cc

    render() { 
        return ( 
            <div>å°å§å§</div>
         );
    }
}
export default XiaojiejieItem;
```

å°±å¯ä»¥åˆ°ä»¥å‰å†™çš„`Xiaojiejie.js`æ–‡ä»¶ä¸­ç”¨importè¿›è¡Œå¼•å…¥

```javascript
import React,{Component,Fragment } from 'react'
import './style.css'
import XiaojiejieItem from './XiaojiejieItem'

class Xiaojiejie extends Component{
//jsçš„æ„é€ å‡½æ•°ï¼Œç”±äºå…¶ä»–ä»»ä½•å‡½æ•°æ‰§è¡Œ
constructor(props){
    super(props) //è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå›ºå®šå†™æ³•
    this.state={
        inputValue:'' , // inputä¸­çš„å€¼
        list:['å¯çˆ±åŠªåŠ›','å®‡å®™æ— æ•Œ']    //æœåŠ¡åˆ—è¡¨
    }
}

render(){
    return  (
        <Fragment>
            {/* æ­£ç¡®æ³¨é‡Šçš„å†™æ³• */}
<div>
    <label htmlFor="lisa">åŠ å…¥å±æ€§ï¼š</label>
    <input id="lisa" className="input" value={this.state.inputValue} onChange={this.inputChange.bind(this)} />
    <button onClick={this.addList.bind(this)}> å¢åŠ å±æ€§ </button>
</div>
            <ul>
                {
                    this.state.list.map((item,index)=>{
                        return (
                            //----------------å…³é”®ä¿®æ”¹ä»£ç ----start
                            <div>
                                <XiaojiejieItem />
                            </div>
                            //----------------å…³é”®ä¿®æ”¹ä»£ç ----end

                        )
                    })
                }
            </ul>  
        </Fragment>
    )
}

    inputChange(e){
        this.setState({
            inputValue:e.target.value
        })
    }
    //å¢åŠ æœåŠ¡çš„æŒ‰é’®å“åº”æ–¹æ³•
    addList(){
        this.setState({
            list:[...this.state.list,this.state.inputValue],
            inputValue:''
        })

    }
//åˆ é™¤å•é¡¹æœåŠ¡
deleteItem(index){
    let list = this.state.list
    list.splice(index,1)
    this.setState({
        list:list
    })

}
}
export default Xiaojiejie 
```

### çˆ¶ç»„ä»¶å‘å­ç»„ä»¶çš„ä¼ å€¼

ä½¿ç”¨ç»„ä»¶å±æ€§çš„å½¢å¼çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼ã€‚

`Xiaojiejie.js`åœ¨`<XiaojiejieItem>`ç»„ä»¶ä¸­åŠ å…¥`content`å±æ€§ï¼Œç„¶åç»™å±æ€§ä¼ é€’`{item}`ï¼Œè¿™æ ·å°±å®Œæˆäº†**çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼**ã€‚

```jsx
<XiaojiejieItem content={item} />
```

`XiaojiejieItem.js`é€šè¿‡`this.props.xxx`çš„å½¢å¼è¿›è¡Œæ¥å—

```javascript
import React, { Component } from 'react'; //imrc
class XiaojiejieItem  extends Component { //cc

    render() { 
        return ( 
            <div>{this.props.content}</div>
         );
    }
}

export default XiaojiejieItem;
```

**çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’å†…å®¹ï¼Œé å±æ€§çš„å½¢å¼ä¼ é€’ã€‚**

### å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®

å…ˆæ¥ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œè¿™æ—¶å€™å½“ç„¶æ˜¯è¦`XiaojiejieItem.js`åœ¨`XiaojiejieItem`ç»„ä»¶ä¸­ç»‘å®šäº†ï¼Œä»£ç å¦‚ä¸‹ï¼š

```javascript
import React, { Component } from 'react'; //imrc
class XiaojiejieItem  extends Component { //cc

    render() { 
        return ( 
            <div onClick={this.handleClick}>{this.props.content}</div>
         );
    }

    handleClick(){
        console.log('å°å§å§æ’©æ‹¨äº†æˆ‘çš„å¿ƒ')
    }
}
export default XiaojiejieItem;
```

ä¿®æ”¹`XiaoJieJie`ç»„ä»¶çš„`render`ä»£ç å¦‚ä¸‹ï¼š

```javascript
<ul>
    {
        this.state.list.map((item,index)=>{
            return (
                <XiaojiejieItem 
                key={index+item}  
                content={item} />
            )
        })
    }
</ul>  
```

ç»‘å®šæˆåŠŸåï¼Œç°åœ¨å°±è¦é€šè¿‡æ“ä½œå­ç»„ä»¶åˆ é™¤çˆ¶ç»„ä»¶é‡Œçš„æ•°æ®äº†ã€‚

ä½†æ˜¯Reactæœ‰æ˜ç¡®è§„å®šï¼Œå­ç»„ä»¶æ—¶ä¸èƒ½æ“ä½œçˆ¶ç»„ä»¶é‡Œçš„æ•°æ®çš„ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©ä¸€ä¸ªçˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼Œæ¥ä¿®æ”¹çˆ¶ç»„ä»¶çš„å†…å®¹ã€‚

```javascript
import React, { Component } from 'react'; //imrc
class XiaojiejieItem  extends Component { //cc
   //--------------ä¸»è¦ä»£ç --------start
   constructor(props){
       super(props)
       this.handleClick=this.handleClick.bind(this)
   }
   //--------------ä¸»è¦ä»£ç --------end
    render() { 
        return ( 
            <div onClick={this.handleClick}>
                {this.props.content}
            </div>
        );
    }
    handleClick(){
        console.log(this.props.index)
    }
}

export default XiaojiejieItem;
```

**å­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•**

å¦‚æœå­ç»„ä»¶è¦è°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•ï¼Œå…¶å®å’Œä¼ é€’æ•°æ®å·®ä¸å¤šï¼Œåªè¦åœ¨ç»„ä»¶è°ƒç”¨æ—¶ï¼ŒæŠŠæ–¹æ³•ä¼ é€’ç»™å­ç»„ä»¶å°±å¯ä»¥äº†,è®°å¾—è¿™é‡Œä¹Ÿè¦è¿›è¡Œ`this`çš„ç»‘å®šï¼Œå¦‚æœä¸ç»‘å®šå­ç»„ä»¶æ˜¯æ²¡åŠæ³•æ‰¾åˆ°è¿™ä¸ªçˆ¶ç»„ä»¶çš„æ–¹æ³•çš„ã€‚

```jsx
<ul>
    {
        this.state.list.map((item,index)=>{
            return (
                <XiaojiejieItem 
                key={index+item}  
                content={item}
                index={index}
                //å…³é”®ä»£ç -------------------start
                deleteItem={this.deleteItem.bind(this)}
                //å…³é”®ä»£ç -------------------end
                />
            )
        })
    }
</ul>  
```

ä¼ é€’åï¼Œåœ¨`XiaojiejieItem`ç»„ä»¶é‡Œç›´æ¥hiç”¨å°±å¯ä»¥äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š

```javascript
handleClick(){
    this.props.deleteItem(this.props.index)
}
```

## å››ã€PropTypesæ ¡éªŒä¼ é€’å€¼

### PropTypesç®€å•åº”ç”¨

æˆ‘ä»¬åœ¨`Xiaojiejie.js`ç»„ä»¶é‡Œä¼ é€’äº†4ä¸ªå€¼ï¼Œæœ‰å­—ç¬¦ä¸²ï¼Œæœ‰æ•°å­—ï¼Œæœ‰æ–¹æ³•ï¼Œè¿™äº›éƒ½æ˜¯å¯ä»¥ä½¿ç”¨`PropTypes`é™åˆ¶çš„ã€‚åœ¨ä½¿ç”¨éœ€è¦å…ˆå¼•å…¥`PropTypes`ã€‚

```js
import PropTypes from 'prop-types'
```

å¼•å…¥åï¼Œå°±å¯ä»¥åœ¨ç»„ä»¶çš„ä¸‹æ–¹è¿›è¡Œå¼•ç”¨äº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å­ç»„ä»¶çš„æœ€ä¸‹é¢ï¼ˆä¸æ˜¯ç±»é‡Œè¾¹ï¼‰ï¼Œå†™å…¥ä¸‹é¢çš„ä»£ç ï¼š

```js
XiaojiejieItem.propTypes={
    content:PropTypes.string,
    deleteItem:PropTypes.func,
    index:PropTypes.number
}
```

`XiaojiejieItem.JS`æ–‡ä»¶çš„ä»£ç ã€‚

```js
import React, { Component } from 'react'; //imrc
import PropTypes from 'prop-types'

class XiaojiejieItem  extends Component { //cc

   constructor(props){
       super(props)
       this.handleClick=this.handleClick.bind(this)
   }

    render() { 
        return ( 
            <div onClick={this.handleClick}>
                {this.props.content}
            </div>
        );
    }

    handleClick(){

        this.props.deleteItem(this.props.index)
    }

}
 //--------------ä¸»è¦ä»£ç --------start
XiaojiejieItem.propTypes={
    content:PropTypes.string,
    deleteItem:PropTypes.func,
    index:PropTypes.number
}
 //--------------ä¸»è¦ä»£ç --------end
export default XiaojiejieItem;
```

### å¿…ä¼ å€¼çš„æ ¡éªŒ

æ¯”å¦‚ç°åœ¨æˆ‘ä»¬åŠ å…¥ä¸€ä¸ª`avname`çš„å±æ€§ï¼Œå¹¶æ”¾å…¥`JSX`ä¸­ï¼Œå°±ç®—ä¸ä¼ é€’è¿™ä¸ªå€¼ä¹Ÿä¸ä¼šæŠ¥é”™çš„ã€‚ä»£ç å¦‚ä¸‹ï¼š

```js
render() { 
    return ( 
        <div onClick={this.handleClick}>
            {this.props.avname}ä¸ºä½ åš- {this.props.content}
        </div>
    );
}
```

è¿™æ—¶å€™ä»£ç æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œæˆ‘ä»¬ä¼ ä¸ä¼ æ— æ‰€è°“ã€‚æ¯”å¦‚æˆ‘ä»¬ç°åœ¨ä¼ ä¸€ä¸ªå±æ€§è¿‡æ¥ã€‚

```jsx
<ul>
    {
        this.state.list.map((item,index)=>{
            return (
                <XiaojiejieItem 
                key={index+item}  
                content={item}
                index={index}
                avname='lisa'
                deleteItem={this.deleteItem.bind(this)}
                />
            )
        })
    }
</ul>  
```

è¿™æ—¶å€™é¡µé¢æ˜¾ç¤ºæ­£å¸¸äº†ï¼Œä½†æ˜¯æ€æ ·é¿å…å¿…é¡»ä¼ é€’avnameè¿™ä¸ªå±æ€§å€¼?å¦‚æœä¸ä¼ é€’å°±æŠ¥é”™,è¿™å°±éœ€è¦ä½¿ç”¨`isRequired`å…³é”®å­—äº†,å®ƒè¡¨ç¤ºå¿…é¡»è¿›è¡Œä¼ é€’ï¼Œå¦‚æœä¸ä¼ é€’å°±æŠ¥é”™ã€‚

```js
avname:PropTypes.string.isRequired
```

### ä½¿ç”¨é»˜è®¤å€¼`defaultProps`

æœ‰äº›äººæ˜¯éå¸¸è…¼è…†çš„ï¼Œä»–æ˜¯ä¸å¥½æ„æ€é€‰æ‹©çš„ï¼Œæ‰€ä»¥æœ‰æ—¶å€™æ˜¯éœ€è¦æœ‰ä¸€ä¸ªé»˜è®¤çš„äººä¸ºå¥¹æœåŠ¡çš„ã€‚`defalutProps`å°±å¯ä»¥å®ç°é»˜è®¤å€¼çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç°åœ¨æŠŠ`avname`çš„é»˜è®¤å€¼è®¾ç½®æˆ"jennifer" ï¼Œç„¶åæŠŠ`avname`çš„å±æ€§åˆ é™¤æ‰ã€‚

```js
XiaojiejieItem.defaultProps = {
    avname:'jennifer'
}
```

## äº”ã€refçš„ä½¿ç”¨æ–¹æ³•

### ä»£æ›¿åŸæ¥çš„`e.target.value`

ä»¥å‰çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å†™äº†ä¸‹é¢çš„ä»£ç ï¼Œä½¿ç”¨äº†`e.target`ï¼Œè¿™å¹¶ä¸ç›´è§‚ï¼Œä¹Ÿä¸å¥½çœ‹ã€‚è¿™ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`ref`æ¥è¿›è¡Œè§£å†³ã€‚

```javascript
inputChange(e){
    this.setState({
        inputValue:e.target.value
    })
}
```

å¦‚æœè¦ä½¿ç”¨`ref`æ¥è¿›è¡Œï¼Œéœ€è¦ç°åœ¨`JSX`ä¸­è¿›è¡Œç»‘å®šï¼Œ ç»‘å®šæ—¶æœ€å¥½ä½¿ç”¨ES6è¯­æ³•ä¸­çš„ç®­å¤´å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥ç®€æ´æ˜äº†çš„ç»‘å®šDOMå…ƒç´ ã€‚

```jsx
<input 
    id="jspang" 
    className="input" 
    value={this.state.inputValue} 
    onChange={this.inputChange.bind(this)}
    //å…³é”®ä»£ç â€”â€”----------start
    ref={(input)=>{this.input=input}}
    //å…³é”®ä»£ç ------------end
    />
```

ç»‘å®šåå¯ä»¥æŠŠä¸Šè¾¹çš„ç±»æ”¹å†™æˆå¦‚ä¸‹ä»£ç :

```js
inputChange(){
    this.setState({
        inputValue:this.input.value
    })
}
```

è¿™å°±ä½¿æˆ‘ä»¬çš„ä»£ç å˜å¾—è¯­ä¹‰åŒ–å’Œä¼˜é›…çš„å¤šã€‚ä½†æ˜¯å°±æˆ‘ä¸ªäººçš„ç»éªŒæ¥è®²ï¼Œæˆ‘æ˜¯**ä¸å»ºè®®ç”¨`ref`è¿™æ ·æ“ä½œçš„**ï¼Œå› ä¸º`React`çš„æ˜¯æ•°æ®é©±åŠ¨çš„ï¼Œæ‰€ä»¥ç”¨refä¼šå‡ºç°å„ç§é—®é¢˜ã€‚

## å…­ã€ç”Ÿå‘½å‘¨æœŸ

1. `Initialization`:åˆå§‹åŒ–é˜¶æ®µã€‚
2. `Mounting`: æŒ‚è½½é˜¶æ®µã€‚
3. `Updation`: æ›´æ–°é˜¶æ®µã€‚
4. `Unmounting`: é”€æ¯é˜¶æ®µ

### ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸå‡½æ•°

å¦‚æœéè¦ç”¨ä¸€å¥è¯æŠŠç”Ÿå‘½å‘¨æœŸå‡½æ•°è¯´æ˜ç™½ï¼Œæˆ‘è§‰çš„å¯ä»¥ç”¨è¿™å¥è¯æ¥è¯´æ˜ï¼š

> ç”Ÿå‘½å‘¨æœŸå‡½æ•°æŒ‡åœ¨æŸä¸€ä¸ªæ—¶åˆ»ç»„ä»¶ä¼šè‡ªåŠ¨è°ƒç”¨æ‰§è¡Œçš„å‡½æ•°

ä¸¾ä¾‹ï¼šå†™çš„å°å§å§çš„ä¾‹å­ã€‚é‡Œè¾¹çš„`render()`å‡½æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå®ƒåœ¨stateå‘ç”Ÿæ”¹å˜æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„è‡ªåŠ¨æ‰§è¡Œå‡½æ•°ã€‚

- `constructor`ä¸ç®—ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚

`constructor`æˆ‘ä»¬å«æ„é€ å‡½æ•°ï¼Œå®ƒæ˜¯ES6çš„åŸºæœ¬è¯­æ³•ã€‚è™½ç„¶å®ƒå’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ€§è´¨ä¸€æ ·ï¼Œä½†ä¸èƒ½è®¤ä¸ºæ˜¯ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚

ä½†æ˜¯ä½ è¦å¿ƒé‡ŒæŠŠå®ƒå½“æˆä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæˆ‘ä¸ªäººæŠŠå®ƒçœ‹æˆReactçš„`Initialization`é˜¶æ®µï¼Œå®šä¹‰å±æ€§ï¼ˆpropsï¼‰å’ŒçŠ¶æ€(state)ã€‚

### `Mounting`: æŒ‚è½½é˜¶æ®µ

Mountingé˜¶æ®µå«æŒ‚è½½é˜¶æ®µï¼Œä¼´éšç€æ•´ä¸ªè™šæ‹ŸDOMçš„ç”Ÿæˆï¼Œå®ƒé‡Œè¾¹æœ‰ä¸‰ä¸ªå°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š

1. `componentWillMount` :  åœ¨ç»„ä»¶å³å°†è¢«æŒ‚è½½åˆ°é¡µé¢çš„æ—¶åˆ»æ‰§è¡Œã€‚
2. `render` : é¡µé¢stateæˆ–propså‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œã€‚
3. `componentDidMount`  : ç»„ä»¶æŒ‚è½½å®Œæˆæ—¶è¢«æ‰§è¡Œã€‚

**componentWillMount**ä»£ç 

```js
componentWillMount(){
    console.log('componentWillMount----ç»„ä»¶å°†è¦æŒ‚è½½åˆ°é¡µé¢çš„æ—¶åˆ»')
}
```

**componentDidMount**ä»£ç 

```js
componentDidMount(){
    console.log('componentDidMount----ç»„ä»¶æŒ‚è½½å®Œæˆçš„æ—¶åˆ»æ‰§è¡Œ')
}
```

**render**ä»£ç 

```js
render(){
    console.log('render---ç»„ä»¶æŒ‚è½½ä¸­.......')
}
```

è¿™æ—¶å€™æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹æ§åˆ¶å°ï¼Œä¼šä¸ºæˆ‘ä»¬æ‰“å‡ºå¦‚ä¸‹æç¤ºï¼š

```js
componentWillMount----ç»„ä»¶å°†è¦æŒ‚è½½åˆ°é¡µé¢çš„æ—¶åˆ»æ‰§è¡Œ
render----å¼€å§‹æŒ‚è½½æ¸²æŸ“
componentDidMount----ç»„ä»¶æŒ‚è½½å®Œæˆçš„æ—¶åˆ»æ‰§è¡Œ
```

è¿™ä¹Ÿæ˜¯ç”Ÿå‘½å‘¨æœŸçš„é¡ºåºã€‚æœ‰å°ä¼™ä¼´ä¼šé—®æˆ‘ï¼Œè¿™ä¸ªå‡½æ•°ä¹¦å†™æœ‰é¡ºåºå—?å“ªä¸ªåœ¨å‰ï¼Ÿå“ªä¸ªåœ¨åï¼Ÿå…¶å®æ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œä½ å¯ä»¥éšä¾¿æ”¹åŠ¨ä»–ä»¬çš„é¡ºåºã€‚

**æ³¨æ„çš„é—®é¢˜**

`componentWillMount`å’Œ`componentDidMount`è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåªåœ¨é¡µé¢åˆ·æ–°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œè€Œ`render`å‡½æ•°æ˜¯åªè¦æœ‰stateå’Œpropså˜åŒ–å°±ä¼šæ‰§è¡Œ

### `Updation`: æ›´æ–°é˜¶æ®µ

**shouldComponentUpdateå‡½æ•°**

`shouldComponentUpdate`å‡½æ•°ä¼šåœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰ï¼Œè‡ªåŠ¨è¢«æ‰§è¡Œã€‚æ¯”å¦‚å†™å…¥ä¸‹é¢çš„ä»£ç :

```javascript
shouldComponentUpdate(){
    console.log('shouldComponentUpdate---ç»„ä»¶å‘ç”Ÿæ”¹å˜å‰æ‰§è¡Œ')
}
```

å®ƒè¦æ±‚è¿”å›ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„ç»“æœï¼Œå¿…é¡»æœ‰è¿”å›å€¼ï¼Œè¿™é‡Œå°±ç›´æ¥è¿”å›ä¸€ä¸ª`true`äº†ï¼ˆçœŸå®å¼€å‘ä¸­ï¼Œè¿™ä¸ªæ˜¯æœ‰å¤§ä½œç”¨çš„ï¼‰ã€‚

```javascript
shouldComponentUpdate(){
    console.log('shouldComponentUpdate---ç»„ä»¶å‘ç”Ÿæ”¹å˜å‰æ‰§è¡Œ')
    return true
}
```

ç°åœ¨å°±å¯ä»¥åœ¨æ§åˆ¶å°`console`é‡Œçœ‹åˆ°ç»“æœäº†ï¼Œå¹¶ä¸”ç»“æœæ˜¯æ¯æ¬¡æ–‡æœ¬æ¡†å‘ç”Ÿæ”¹å˜æ—¶éƒ½ä¼šéšç€æ”¹å˜ã€‚å¦‚æœä½ è¿”å›äº†`false`ï¼Œè¿™ç»„ä»¶å°±ä¸ä¼šè¿›è¡Œæ›´æ–°äº†ã€‚ ç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯è¿”å›trueï¼Œå°±åŒæ„ç»„ä»¶æ›´æ–°;è¿”å›false,å°±åå¯¹ç»„ä»¶æ›´æ–°ã€‚

**componentWillUpdateå‡½æ•°**

`componentWillUpdate`åœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰ï¼Œä½†`shouldComponenUpdate`ä¹‹åè¢«æ‰§è¡Œã€‚ä½†æ˜¯å¦‚æœ`shouldComponentUpdate`è¿”å›falseï¼Œè¿™ä¸ªå‡½æ•°å°±ä¸ä¼šè¢«æ‰§è¡Œäº†ã€‚

```javascript
//shouldComponentUpdateè¿”å›trueæ‰ä¼šè¢«æ‰§è¡Œã€‚
componentWillUpdate(){
    console.log('componentWillUpdate---ç»„ä»¶æ›´æ–°å‰ï¼ŒshouldComponentUpdateå‡½æ•°ä¹‹åæ‰§è¡Œ')
}
```

**componentDidUpdate**

`componentDidUpdate`åœ¨ç»„ä»¶æ›´æ–°ä¹‹åæ‰§è¡Œï¼Œå®ƒæ˜¯ç»„ä»¶æ›´æ–°çš„æœ€åä¸€ä¸ªç¯èŠ‚ã€‚

```javascript
componentDidUpdate(){
    console.log('componentDidUpdate----ç»„ä»¶æ›´æ–°ä¹‹åæ‰§è¡Œ')
}
```

ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬çœ‹å‡ºç»“æœï¼Œå¯ä»¥åœ¨æ¯ä¸ªå‡½æ•°å‰åŠ ä¸Šåºå·ã€‚æœ€åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š

```
1-shouldComponentUpdate---ç»„ä»¶å‘ç”Ÿæ”¹å˜å‰æ‰§è¡Œ
2-componentWillUpdate---ç»„ä»¶æ›´æ–°å‰ï¼ŒshouldComponentUpdateå‡½æ•°ä¹‹åæ‰§è¡Œ
3-render----å¼€å§‹æŒ‚è½½æ¸²æŸ“
4-componentDidUpdate----ç»„ä»¶æ›´æ–°ä¹‹åæ‰§è¡Œ
```

ç»“æœå’Œæˆ‘ä»¬å†™çš„é¡ºåºä¹Ÿæ˜¯ç›¸å¯¹çš„ï¼Œè®²åˆ°è¿™é‡Œï¼Œä½ ä¸€å®šå¯¹Reactçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æœ‰äº†æ¯”è¾ƒç›´è§‚çš„äº†è§£äº†ã€‚

**componentWillReceiveProps å‡½æ•°**

æˆ‘ä»¬å¯ä»¥å…ˆåœ¨`Xiaojiejie.js`ç»„ä»¶é‡Œå†™ä¸‹è¿™ä¸ªå‡½æ•°ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ã€‚

```javascript
componentWillReceiveProps(){
    console.log('componentWillReceiveProps')
}
```

è¿™æ—¶å€™ä¼šå‘ç°å‡½æ•°ä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸º`Xiaojiejie.js`ç®—æ˜¯ä¸€ä¸ªé¡¶å±‚ç»„ä»¶ï¼Œå®ƒå¹¶æ²¡æ¥æ”¶ä»»ä½•çš„`props`ã€‚å¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°ç§»åŠ¨åˆ°`XiaojiejieItem.js`ç»„ä»¶ä¸­ã€‚

å‡¡æ˜¯ç»„ä»¶éƒ½æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ‰€ä»¥å­ç»„ä»¶ä¹Ÿæ˜¯æœ‰çš„ï¼Œå¹¶ä¸”å­ç»„ä»¶æ¥æ”¶äº†`props`ï¼Œè¿™æ—¶å€™å‡½æ•°å°±å¯ä»¥è¢«æ‰§è¡Œäº†ã€‚

```javascript
componentWillReceiveProps(){
        console.log('child - componentWillReceiveProps')
    }
```

è¿™ä¸ªæ—¶å€™å†é¢„è§ˆï¼Œå°±ä¼šçœ‹åˆ°`componentWillReceiveProps`æ‰§è¡Œäº†ã€‚é‚£ç°åœ¨å¯ä»¥æ€»ç»“ä¸€ä¸‹å®ƒçš„æ‰§è¡Œæ—¶é—´äº†ã€‚

> å­ç»„ä»¶æ¥æ”¶åˆ°çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‚æ•°ï¼Œçˆ¶ç»„ä»¶renderå‡½æ•°é‡æ–°è¢«æ‰§è¡Œï¼Œè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå°±ä¼šè¢«æ‰§è¡Œã€‚

- ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªç»„ä»¶ç¬¬ä¸€æ¬¡å­˜åœ¨äºDomä¸­ï¼Œå‡½æ•°æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„;
- å¦‚æœå·²ç»å­˜åœ¨äºDomä¸­ï¼Œå‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œã€‚

### `Unmounting`: é”€æ¯é˜¶æ®µ

**componentWillUnmount**

è¿™ä¸ªå‡½æ•°æ—¶ç»„ä»¶ä»é¡µé¢ä¸­åˆ é™¤çš„æ—¶å€™æ‰§è¡Œï¼Œæ¯”å¦‚åœ¨`XiaojiejieItem.js`

```javascript
//å½“ç»„ä»¶ä»é¡µé¢ä¸­åˆ é™¤çš„æ—¶å€™æ‰§è¡Œ
componentWillUnmount(){
    console.log('child - componentWillUnmount')
}
```

å†™å®Œåï¼Œå¯ä»¥åˆ°æµè§ˆå™¨ç»ˆç«¯ä¸­æŸ¥çœ‹ç»“æœï¼Œå½“æˆ‘ä»¬ç‚¹å‡»æœåŠ¡é¡¹ï¼ŒæœåŠ¡é¡¹è¢«åˆ é™¤æ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±è¢«æ‰§è¡Œäº†ã€‚

### ç”Ÿå‘½å‘¨æœŸæ”¹å–„ç¨‹åºæ€§èƒ½

ä½ åœ¨æµè§ˆå™¨çš„æ–‡æœ¬æ¡†ä¸­è¾“å…¥ä¸€ä¸‹å†…å®¹ï¼Œä½ å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°å­ç»„ä»¶ä¹Ÿå‘ç”Ÿäº†é‡æ–°`render`çš„æƒ…å†µã€‚

æœ‰å¾ˆå¤šç¨‹åºå‘˜ä¼šå¿½ç•¥è¿™æ ·çš„æ€§èƒ½æŸè€—ï¼Œè®¤ä¸ºæ²¡æœ‰ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œä½†æ˜¯è½¯ä»¶çš„å¡é¡¿æ˜¯ä¸€ç‚¹ç‚¹äº§ç”Ÿçš„ï¼Œæ‰€ä»¥å¿…é¡»è¦å‡å°‘æ€§èƒ½æŸè€—ã€‚

å¯ä»¥åœ¨`XiaojiejieItem.js`çš„`render`å‡½æ•°é‡ŒåŠ å…¥ä¸‹é¢çš„ä»£ç ï¼Œæ›´ç›´è§‚çš„çœ‹åˆ°è¿™ä¸ªé—®é¢˜ã€‚

```javascript
render() { 
    console.log('child-render')
    return ( 
        <div onClick={this.handleClick}>
            {this.props.avname}ä¸ºä½ åš- {this.props.content}
        </div>
    );
}
```

#### åˆ©ç”¨`shouldComponentUpdate`è§£å†³

è¿™ä¸ªé—®é¢˜çœ‹ä¼¼å¾ˆå°ï¼Œä½†æ˜¯å½“ä½ é¡µé¢å¾ˆå¤æ‚æ—¶ï¼Œè¶³ä»¥å½±å“ç”¨æˆ·ä½“éªŒï¼Œä¸è¦éª—è‡ªå·±äº†ã€‚å…¶å®ç”¨`shouldComponentUpdate`å‡½æ•°å°±å¯ä»¥ç®€å•çš„è§£å†³è°ƒè¿™ä¸ªé—®é¢˜ã€‚

ç›´æ¥å†`XiaojiejieItem.js`ä¸­åŠ å…¥ä¸‹é¢çš„ä»£ç :

```javascript
shouldComponentUpdate(){
    return false;
}
```

è¿™æ—¶å€™åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼Œé—®é¢˜å·²ç»æ²¡æœ‰äº†ã€‚ä½†æ˜¯è¿™æ ·åšå¤ªæš´åŠ›äº†ï¼Œå¦å®šäº†æ‰€æœ‰çš„ä¸œè¥¿ï¼Œé‚£å¦‚æœåœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œéœ€è¦æ”¹å˜å€¼å±æ€§å€¼ï¼Œè¾¾åˆ°æ¸²æŸ“å°±æ²¡åŠæ³•äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ›´ä¼˜é›…ä¸€ä¸‹ï¼Œå†™å‡ºä¸‹é¢çš„ä»£ç ã€‚

shouldComponentUpdateæœ‰ä¸¤ä¸ªå‚æ•°ï¼š

- nextProps:å˜åŒ–åçš„å±æ€§;
- nextState:å˜åŒ–åçš„çŠ¶æ€;

```javascript
shouldComponentUpdate(nextProps,nextState){
    if(nextProps.content !== this.props.content){
        return true
    }else{
        return false
    }

}
```

## ä¸ƒã€axiosæ•°æ®è¯·æ±‚

### axioså®‰è£…

`Axios`çš„å®‰è£…å¯ä»¥ä½¿ç”¨npmæ¥è¿›è¡Œå®‰è£…ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¾“å…¥ä¸‹é¢çš„ä»£ç ã€‚

```
npm install -save axios
```

è¾“å…¥ åå°±å¯ä»¥æ­£åœ¨çš„å¼€å§‹å®‰è£…äº†ã€‚

**npm install -save å’Œ -save-devåˆ†ä¸æ¸…**

- `npm install xxx`: å®‰è£…é¡¹ç›®åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œä¸ä¼šå°†æ¨¡å—ä¾èµ–å†™å…¥`devDependencies`æˆ–`dependencies`ã€‚
- `npm install -g xxx`: `-g`çš„æ„æ€æ˜¯å°†æ¨¡å—å®‰è£…åˆ°å…¨å±€ï¼Œå…·ä½“å®‰è£…åˆ°ç£ç›˜å“ªä¸ªä½ç½®ï¼Œè¦çœ‹ `npm cinfig prefix`çš„ä½ç½®
- `npm install -save xxx`ï¼š`-save`çš„æ„æ€æ˜¯å°†æ¨¡å—å®‰è£…åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œå¹¶åœ¨`package`æ–‡ä»¶çš„`dependencies`èŠ‚ç‚¹å†™å…¥ä¾èµ–ã€‚
- `npm install -save-dev xxx`ï¼š`-save-dev`çš„æ„æ€æ˜¯å°†æ¨¡å—å®‰è£…åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œå¹¶åœ¨`package`æ–‡ä»¶çš„`devDependencies`èŠ‚ç‚¹å†™å…¥ä¾èµ–ã€‚

ä½œä¸ºä¸€ä¸ªå‰ç«¯ï¼Œè¦æ¸…æ¥šçš„çŸ¥é“`npm install`è¿™å››ç§ç”¨æ³•ï¼Œé˜²æ­¢é¡¹ç›®ä¾èµ–é”™è¯¯ï¼Œåœ¨åˆ«äººä¸‹è½½ä½ çš„ä»£ç æ²¡åŠæ³•è·‘èµ·æ¥ã€‚

### axiosè¯·æ±‚æ•°æ®

å®‰è£…å¥½`axiso`ä¹‹åï¼Œéœ€è¦åœ¨ä½¿ç”¨ajaxçš„åœ°æ–¹å…ˆå¼•å…¥

```js
import axios from 'axios'
```

å¼•å…¥åï¼Œå¯ä»¥åœ¨`componentDidMount`ç”Ÿå‘½å‘¨æœŸå‡½æ•°é‡Œè¯·æ±‚ajaxï¼Œæˆ‘ä¹Ÿå»ºè®®åœ¨`componentDidMount`å‡½æ•°é‡Œæ‰§è¡Œï¼Œå› ä¸ºåœ¨renderé‡Œæ‰§è¡Œï¼Œä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚ä¸€ç›´å¾ªç¯æ¸²æŸ“ï¼›

åœ¨`componentWillMount`é‡Œæ‰§è¡Œï¼Œåœ¨ä½¿ç”¨RNæ—¶ï¼Œåˆä¼šæœ‰å†²çªã€‚æ‰€ä»¥å¼ºçƒˆå»ºè®®åœ¨`componentDidMount`å‡½æ•°é‡Œä½œ`ajax`è¯·æ±‚ã€‚

```js
componentDidMount(){
    axios.post('https://web-api.juejin.im/v3/web/wbbr/bgeda')
        .then((res)=>{console.log('axios è·å–æ•°æ®æˆåŠŸ:'+JSON.stringify(res))  })
        .catch((error)=>{console.log('axios è·å–æ•°æ®å¤±è´¥'+error)})
}
```

ä¸Šé¢çš„ä»£ç æ˜¯ä»¥æ˜é‡‘çš„ä¸€ä¸ªæ¥å£ä¸ºä¾‹ï¼Œåšäº†ä¸€æ¬¡`ajax`è¯·æ±‚ã€‚å¹¶ä¸”è¯·æ±‚åˆ°äº†æ•°æ®ï¼Œç»™æˆ‘ä»¬è¿”å›äº†ã€‚

### axiosè¯·æ±‚EasyMock

ä½¿ç”¨`Easy-mock`æ¥æ¨¡æ‹Ÿæ¥å£æ•°æ®ã€‚

åœ¨åˆ›å»ºæ¥å£æ—¶ï¼Œå†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š

```json
{
  "data": ['å¯çˆ±åŠªåŠ›','å®‡å®™æ— æ•Œ']
}
```

ç„¶ååœ¨ä¸ŠèŠ‚è¯¾çš„Axiosä»£ç éƒ¨åˆ†ï¼ŒæŠŠè¯·æ±‚æ”¹ä¸º`get`,ç„¶åé¢„è§ˆï¼Œåˆ°æ§åˆ¶å°æŸ¥çœ‹ç»“æœã€‚

```javascript
componentDidMount(){
    axios.get('æ”¹ä¸ºä½ è‡ªå·±çš„æ¥å£URL')
        .then((res)=>{console.log('axios è·å–æ•°æ®æˆåŠŸ:'+JSON.stringify(res))  })
        .catch((error)=>{console.log('axios è·å–æ•°æ®å¤±è´¥'+error)})
}
```

è¿™æ—¶å€™ä½ åº”è¯¥å¯ä»¥è·å¾—æ¥å£æ•°æ®äº†ï¼Œä¹Ÿè¯´æ˜æˆ‘ä»¬çš„æ¥å£åˆ¶ä½œæ­£å¸¸äº†ï¼Œè¿™å°±å¾ˆç±»ä¼¼æˆ‘ä»¬é¡¹ç›®ä¸­çš„çœŸå®æ¥å£äº†ã€‚

### ä¿®æ”¹ç¨‹åº å˜ä¸ºåŠ¨æ€æ¥å£

åœ¨å®¢æˆ·ç«¯å·²ç»å¾—åˆ°äº†è¿œç¨‹æ•°æ®ï¼Œé‚£å‰©ä¸‹çš„å°±æ˜¯`setState`ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š

```javascript
componentDidMount(){
    axios.get('xxxx')
        .then((res)=>{
            console.log('axios è·å–æ•°æ®æˆåŠŸ:'+JSON.stringify(res))

            this.setState({
                list:res.data.data
            })
          })
        .catch((error)=>{console.log('axios è·å–æ•°æ®å¤±è´¥'+error)})
}
```

é‚£è¿™æ—¶å€™å†æµè§ˆReactç¨‹åºï¼Œä¹Ÿæ˜¯å®Œå…¨å¯ä»¥ä½¿ç”¨çš„ï¼Œä¸è¿‡å·²ç»ä¸æ˜¯ä»¥å‰å†™æ­»çš„ä¸œè¥¿ï¼Œè€Œæ˜¯ä½¿ç”¨è¿œç«¯æ¥å£æ•°æ®ã€‚


## é“¾æ¥ğŸ”—

https://jspang.com/detailed?id=46#toc21